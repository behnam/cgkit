\section{\module{glslangparams} ---
          Extracting OpenGL 2 shader parameters}
\label{slparams}

\declaremodule{extension}{cgkit.glslangparams}
\modulesynopsis{Extracting OpenGL 2 shader parameters}

This module can be used to extract the parameters of an OpenGL 2 shader
from the shader source file.

\begin{funcdesc}{glslangparams}{shader, cpp=None, cpperrstream=sys.stderr}
Extracts the shader parameters from an OpenGL 2 shader source file.

The argument \var{shader} is either the name of the shader source file or a
file-like object that provides the shader sources. \var{cpp} determines how
the shader source is preprocessed. It can either be a string
containing the name of an external preprocessor tool (such as \code{'cpp'})
that must take the file name as parameter and dump the preprocessed
output to stdout or it can be a callable that takes \var{shader} and
\var{cpperrstream} as input and returns the preprocessed sources as a
string. If the external preprocessor does not produce any data a
\exception{PreprocessorNotFound} exception is thrown.  The error stream of the
preprocessor is written to the object that is specified by
\var{cpperrstream} which must have a write() method. If \var{cpperrstream} is
\code{None}, the error stream is ignored.

If \var{cpp} is None a simple internal preprocessor based on the 
\module{simplecpp} module is used.

The function returns three lists (\var{uniform}, \var{attribute}, 
\var{varying}) that contain the variables with the corresponding qualifier.

A uniform variable is a 5-tuple (\var{type}, \var{identifier}, \var{arraysize},
\var{structname}, \var{struct}). \var{arraysize} is a string containing 
the expression for the length of the array (i.e. the value between the
square brackets). If the variable is no array, \var{arraysize} is
\code{None}.  When the variable is a struct, \var{type} has the value
\code{'struct'}. In this case, the struct is given in \var{struct} (which is
itself a list of variables as 5-tuples). If the struct has a name,
this name is given in \var{structname}, otherwise \var{structname} is 
\code{None}.

An attribute variable is a 2-tuple (\var{type}, \var{identifier}) and a 
varying variable is a 3-tuple (\var{type}, \var{identifier}, \var{arraysize}) 
where \var{arraysize} is defined as in the uniform case.
\end{funcdesc}

The module defines the following exception class:

\begin{excdesc}{GLSLangParseError}
This exception is thrown when an error occurs during parsing the shader
source file.
\end{excdesc}
