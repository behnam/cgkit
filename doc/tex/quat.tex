\subsection{quat - quaternions}
\label{quat}

A \class{quat} represents a quaternion type that can be used to store
rotations. A quaternion contains four values of which one can be seen
as the angle and the other three as the axis of rotation. The most
common way to initialize a quaternion is by specifying an angle (in
radians) and the axis of rotation:

\begin{verbatim}
# initialize the quaternion by specifying an angle and the axis of rotation
q = quat(0.5*pi, vec3(0,0,1))

# initialize by specifying a rotation matrix (as mat3 or mat4)
q = quat(R)

# all components are set to zero
q = quat()

(0.0000, 0.0000, 0.0000, 0.0000)

# set the w component
q = quat(2.5)

(0.5000, 0.0000, 0.0000, 0.0000)

# set all four components (w,x,y,z)
q = quat(1,0,0,0)
q = quat([1,0,0,0])
q = quat("1,0,0,0")

(1.0000, 0.0000, 0.0000, 0.0000)
\end{verbatim}

Finally, you can initialize a quaternion with a copy of another quaternion:

\begin{verbatim}
q = quat(r)
\end{verbatim}

%----------------------------------------
{\bf Mathematical operations}

The mathematical operators are supported with the following
combination of types:

\begin{verbatim}
quat  =  quat + quat
quat  =  quat - quat
quat  =  quat * quat
quat  = float * quat
quat  =  quat * float
quat  =  quat / float
quat  = -quat
quat  =  quat ** float = pow(quat, float)   (new in version 1.1)
quat  =  quat ** quat  = pow(quat, quat)    (new in version 1.1)
\end{verbatim}

Additionally, you can compare quaternions with \code{==} and \code{!=}. 
Taking the absolute value will return the magnitude of the quaternion:

\begin{verbatim}
float = abs(q)
\end{verbatim}

%----------------------------------------
{\bf Methods}

\begin{methoddesc}{conjugate}{}
Return the conjugate $(w, -x, -y, -z)$ of the quaternion.
\end{methoddesc}

\begin{methoddesc}{normalize}{}
Returns the normalized quaternion. If the method is called on the null
vector a \exception{ZeroDivisionError} is raised.
\end{methoddesc}

\begin{methoddesc}{inverse}{}
Return the inverse of the quaternion.
\end{methoddesc}

\begin{methoddesc}{toAngleAxis}{}
Returns a tuple containing the angle (in radians) and the axis of rotation.
The returned axis can also be zero if the rotation is actually the identity.
\end{methoddesc}

\begin{methoddesc}{fromAngleAxis}{angle, axis}
Initializes \var{self} from an angle (in radians) and an axis of
rotation and returns \var{self}. The initialized quaternion will be a
unit quaternion. Passing the null vector as axis has the same effect
as passing an angle of 0 (i.e. the quaternion will be set to (1,0,0,0)).
\end{methoddesc}

\begin{methoddesc}{toMat3}{}
Convert the quaternion into a rotation matrix and return the matrix as a 
\class{mat3}.
\end{methoddesc}

\begin{methoddesc}{toMat4}{}
Convert the quaternion into a rotation matrix and return the matrix as a 
\class{mat4}.
\end{methoddesc}

\begin{methoddesc}{fromMat}{matrix}
Initialize \var{self} from a rotation matrix, given either as a
\class{mat3} or a \class{mat4} and returns \var{self}. \var{matrix} must be
a rotation matrix (i.e. the determinant is 1), if you have a matrix
that is made up of other parts as well, call \method{matrix.decompose()} to get
the rotation part.
\end{methoddesc}

\begin{methoddesc}{dot}{b}
Returns the dot product of \var{self} with quaternion \var{b}.\\
New in version 1.1.
\end{methoddesc}

\begin{methoddesc}{log}{}
Returns the natural logarithm of \var{self}.\\
New in version 1.1.
\end{methoddesc}

\begin{methoddesc}{exp}{}
Returns the exponential of \var{self}. \\
New in version 1.1.
\end{methoddesc}

%----------------------------------------
{\bf Related functions}

\begin{funcdesc}{slerp}{t, q0, q1, shortest=True}
Performs a spherical linear interpolation between two quaternions \var{q0}
and \var{q1}. For \var{t}=0.0 the return value equals \var{q0}, for 
\var{t}=1.0 it equals \var{q1}. \var{q0} and \var{q1} must be unit 
quaternions. If \var{shortest} is \code{True} the interpolation will always
be along the shortest path, otherwise it depends on the orientation of
the input quaternions whether the shortest or longest path will be taken
(you can switch between the paths by negating either \var{q0} or \var{q1}).
\end{funcdesc}

\begin{funcdesc}{squad}{t, a, b, c, d}
Performs a spherical cubic interpolation between quaternion \var{a} and \var{d}
where quaternion \var{b} and \var{c} define the shape of the interpolation
curve. For \var{t}=0.0 the return value equals \var{a}, for \var{t}=1.0 it 
equals \var{d}. All quaternions must be unit quaternions.
\end{funcdesc}




